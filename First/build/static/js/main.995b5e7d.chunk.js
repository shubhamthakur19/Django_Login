(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{17:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return j})),n.d(t,"d",(function(){return b})),n.d(t,"c",(function(){return h}));var a=n(7),c=n.n(a),r=n(15),s=n(22),i=n.n(s),o=n(16),l=n.n(o),u=n(27),p=n(2),d=function(){return function(){var t=Object(r.a)(c.a.mark((function t(n){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Accept:"application/json","Content-Type":"application/json"}},t.prev=1,t.next=4,l.a.get("".concat(e.venv.REACT_APP_API_URL,"/app/authenticated"),a);case 4:(r=t.sent).data.error||"error"===r.data.isAuthenticated?n({type:p.a,payload:!1}):"success"===r.data.isAuthenticated?n({type:p.b,payload:!0}):n({type:p.a,payload:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:p.a,payload:!1});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e,t){return function(){var n=Object(r.a)(c.a.mark((function n(a){var r,s;return c.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":i.a.get("csrftoken")}},s=JSON.stringify({username:e,password:t}),n.prev=2,n.next=5,l.a.post("".concat("http://localhost:8000","/app/login"),s,r);case 5:n.sent.data.success?(a({type:p.f}),a(Object(u.a)())):a({type:p.e}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),a({type:p.e});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},b=function(e,t,n){return function(){var a=Object(r.a)(c.a.mark((function a(r){var s,o;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":i.a.get("csrftoken")}},o=JSON.stringify({username:e,password:t,re_password:n}),a.prev=2,a.next=5,l.a.post("".concat("http://localhost:8000","/app/register"),o,s);case 5:a.sent.data.error?r({type:p.i}):r({type:p.j}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),r({type:p.i});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}()},h=function(){return function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Accept:"application/json","Content-Type":"application/json","X-CSRFToken":i.a.get("csrftoken")}},a=JSON.stringify({withCredentials:!0}),e.prev=2,e.next=5,l.a.post("".concat("http://localhost:8000","/app/logout"),a,n);case 5:e.sent.data.success?t({type:p.h}):t({type:p.g}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),t({type:p.g});case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}()}}).call(this,n(31))},2:function(e,t,n){"use strict";n.d(t,"j",(function(){return a})),n.d(t,"i",(function(){return c})),n.d(t,"f",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"h",(function(){return i})),n.d(t,"g",(function(){return o})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"d",(function(){return p})),n.d(t,"c",(function(){return d}));var a="REGISTER_SUCCESS",c="REGISTER_FAIL",r="LOGIN_SUCCESS",s="LOGIN_FAIL",i="LOGOUT_SUCCESS",o="LOGOUT_FAIL",l="AUTHENTICATED_SUCCESS",u="AUTHENTICATED_FAIL",p="LOAD_USER_PROFILE_SUCCESS",d="LOAD_USER_PROFILE_FAIL"},27:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var a=n(7),c=n.n(a),r=n(15),s=(n(22),n(16)),i=n.n(s),o=n(2),l=function(){return function(){var e=Object(r.a)(c.a.mark((function e(t){var n,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Accept:"application/json","Content-Type":"application/json"}},e.prev=1,e.next=4,i.a.get("".concat("http://localhost:8000","/profile/user"),n);case 4:(a=e.sent).data.error?t({type:o.c}):t({type:o.d,payload:a.data}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:o.c});case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()}},72:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(25),s=n.n(r),i=n(6),o=n(5),l=n(8),u=n(17),p=n(1),d=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{logout:u.c})((function(e){var t=e.isAuthenticated,n=e.logout,c=Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.c,{className:"nav-link",to:"/dashboard",children:"Dashboard"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)("a",{className:"nav-link",onClick:n,href:"#!",children:"Logout"})})]}),r=Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.c,{className:"nav-link",to:"/login",children:"Login"})}),Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.c,{className:"nav-link",to:"/register",children:"Register"})})]});return Object(p.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light",children:Object(p.jsxs)("div",{className:"container-fluid",children:[Object(p.jsx)(i.b,{className:"navbar-brand",exact:!0,to:"/",children:"App"}),Object(p.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(p.jsx)("span",{className:"navbar-toggler-icon"})}),Object(p.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNav",children:Object(p.jsxs)("ul",{className:"navbar-nav",children:[Object(p.jsx)("li",{className:"nav-item",children:Object(p.jsx)(i.c,{className:"nav-link",exact:!0,to:"/",children:"Home"})}),t?c:r]})})]})})})),j=n(27),b=Object(l.b)(null,{checkAuthenticated:u.a,load_user:j.a})((function(e){var t=e.children,n=e.checkAuthenticated,c=e.load_user;return Object(a.useEffect)((function(){n(),c()}),[]),Object(p.jsxs)(a.Fragment,{children:[Object(p.jsx)(d,{}),t]})})),h=function(){return Object(p.jsx)("div",{className:"container",children:Object(p.jsxs)("div",{className:"mt-5 p-5 bg-light",children:[Object(p.jsx)("h1",{className:"display-4",children:"Welcome"}),Object(p.jsx)("p",{className:"lead",children:"This is a wonderful application with session authentication in React and Django."}),Object(p.jsx)("hr",{className:"my-4"}),Object(p.jsx)("p",{children:"Click the button below to log in."}),Object(p.jsx)(i.b,{className:"btn btn-primary btn-lg",to:"/login",children:"Login"})]})})},m=n(19),f=n(4),O=n(14),v=n(7),x=n.n(v),g=n(15),y=n(16),N=n.n(y),_=function(){var e=Object(a.useState)(""),t=Object(O.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){var e=function(){var e=Object(g.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.a.get("".concat("http://localhost:8000","/app/csrf_cookie"));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(){return e.apply(this,arguments)}}();e(),c(function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var c=n[a].trim();if(c.substring(0,e.length+1)===e+"="){t=decodeURIComponent(c.substring(e.length+1));break}}return t}("csrftoken"))}),[]),Object(p.jsx)("input",{type:"hidden",name:"csrfmiddlewaretoken",value:n})},A=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{register:u.d})((function(e){var t=e.register,n=e.isAuthenticated,c=Object(a.useState)({username:"",password:"",re_password:""}),r=Object(O.a)(c,2),s=r[0],l=r[1],u=Object(a.useState)(!1),d=Object(O.a)(u,2),j=d[0],b=d[1],h=s.username,v=s.password,x=s.re_password,g=function(e){return l(Object(f.a)(Object(f.a)({},s),{},Object(m.a)({},e.target.name,e.target.value)))};return n?Object(p.jsx)(o.a,{to:"/dashboard"}):j?Object(p.jsx)(o.a,{to:"/login"}):Object(p.jsxs)("div",{className:"container mt-5",children:[Object(p.jsx)("h1",{children:"Register for an Account"}),Object(p.jsx)("p",{children:"Create an account with our Session Auth application"}),Object(p.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),v===x&&(t(h,v,x),b(!0))}(e)},children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"form-label",children:"Username: "}),Object(p.jsx)("input",{className:"form-control",type:"text",placeholder:"Username*",name:"username",onChange:function(e){return g(e)},value:h,required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"form-label mt-3",children:"Password: "}),Object(p.jsx)("input",{className:"form-control",type:"password",placeholder:"Password*",name:"password",onChange:function(e){return g(e)},value:v,minLength:"6",required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"form-label mt-3",children:"Confirm Password: "}),Object(p.jsx)("input",{className:"form-control",type:"password",placeholder:"Confirm Password*",name:"re_password",onChange:function(e){return g(e)},value:x,minLength:"6",required:!0})]}),Object(p.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Register"})]}),Object(p.jsxs)("p",{className:"mt-3",children:["Already have an Account? ",Object(p.jsx)(i.b,{to:"/login",children:"Sign In"})]})]})})),w=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{login:u.b})((function(e){var t=e.login,n=e.isAuthenticated,c=Object(a.useState)({username:"",password:""}),r=Object(O.a)(c,2),s=r[0],l=r[1],u=s.username,d=s.password,j=function(e){return l(Object(f.a)(Object(f.a)({},s),{},Object(m.a)({},e.target.name,e.target.value)))};return n?Object(p.jsx)(o.a,{to:"/dashboard"}):Object(p.jsxs)("div",{className:"container mt-5",children:[Object(p.jsx)("h1",{children:"Sign In"}),Object(p.jsx)("p",{children:"Sign into your Session Auth account"}),Object(p.jsxs)("form",{onSubmit:function(e){return function(e){e.preventDefault(),t(u,d)}(e)},children:[Object(p.jsx)(_,{}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"form-label",children:"Username: "}),Object(p.jsx)("input",{className:"form-control",type:"text",placeholder:"Username*",name:"username",onChange:function(e){return j(e)},value:u,required:!0})]}),Object(p.jsxs)("div",{className:"form-group",children:[Object(p.jsx)("label",{className:"form-label mt-3",children:"Password: "}),Object(p.jsx)("input",{className:"form-control",type:"password",placeholder:"Password*",name:"password",onChange:function(e){return j(e)},value:d,minLength:"6",required:!0})]}),Object(p.jsx)("button",{className:"btn btn-primary mt-3",type:"submit",children:"Login"})]}),Object(p.jsxs)("p",{className:"mt-3",children:["Don't have an Account? ",Object(p.jsx)(i.b,{to:"/register",children:"Sign Up"})]})]})})),S=Object(l.b)((function(e){return{first_name_global:e.profile.first_name,last_name_global:e.profile.last_name,phone_global:e.profile.phone,city_global:e.profile.city}}),{})((function(e){var t=e.first_name_global,n=e.last_name_global,c=e.phone_global,r=e.city_global,s=Object(a.useState)({first_name:"",last_name:"",phone:"",city:""}),i=Object(O.a)(s,1)[0];return Object(a.useEffect)((function(){i({first_name:t,last_name:n,phone:c,city:r})}),[t]),Object(p.jsx)("div",{className:"container",children:Object(p.jsx)("h1",{className:"mt-3",children:"Welcome to your User Dashboard"})})})),k=n(43),C=["component","isAuthenticated"],E=Object(l.b)((function(e){return{isAuthenticated:e.auth.isAuthenticated}}),{})((function(e){var t=e.component,n=e.isAuthenticated,a=Object(k.a)(e,C);return Object(p.jsx)(o.b,Object(f.a)(Object(f.a)({},a),{},{render:function(e){return n?Object(p.jsx)(t,Object(f.a)({},e)):Object(p.jsx)(o.a,{to:"/login"})}}))})),T=n(20),L=n(41),R=n(42),U=n(2),I={isAuthenticated:null},F={username:"",first_name:"",last_name:"",phone:"",city:""},D=Object(T.combineReducers)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case U.b:case U.a:return Object(f.a)(Object(f.a)({},e),{},{isAuthenticated:a});case U.j:return Object(f.a)(Object(f.a)({},e),{},{isAuthenticated:!1});case U.f:return Object(f.a)(Object(f.a)({},e),{},{isAuthenticated:!0});case U.h:case U.i:case U.e:case U.g:default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case U.d:return Object(f.a)(Object(f.a)({},e),{},{username:a.username,first_name:a.profile.first_name,last_name:a.profile.last_name,phone:a.profile.phone,city:a.profile.city});case U.c:return Object(f.a)(Object(f.a)({},e),{},{username:"",first_name:"",last_name:"",phone:"",city:""});default:return e}}}),P=[R.a],G=Object(T.createStore)(D,{},Object(L.composeWithDevTools)(T.applyMiddleware.apply(void 0,P))),q=function(){return Object(p.jsx)(l.a,{store:G,children:Object(p.jsx)(i.a,{children:Object(p.jsxs)(b,{children:[Object(p.jsx)(o.b,{exact:!0,path:"/",component:h}),Object(p.jsx)(o.b,{exact:!0,path:"/register",component:A}),Object(p.jsx)(o.b,{exact:!0,path:"/login",component:w}),Object(p.jsx)(E,{exact:!0,path:"/dashboard",component:S})]})})})};s.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(q,{})}),document.getElementById("root"))}},[[72,1,2]]]);
//# sourceMappingURL=main.995b5e7d.chunk.js.map